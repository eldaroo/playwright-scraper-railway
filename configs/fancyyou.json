{
    "site_name": "FancyYou",
    "base_url": "https://fancyyou.com.ar",
    "use_predefined_urls": false,
    "categories_config": {
        "selector": "a[href*='/categoria/']",
        "attribute": "href",
        "base_path": "fancyyou.com.ar/categoria/",
        "exclude_patterns": [
            "/carrito",
            "/checkout",
            "/$",
            "/my-account",
            "/account",
            "/contacto",
            "/información",
            "/ubicación",
            "/ofertas",
            "/nosotros",
            "/politicas",
            "/terminos",
            "/cuenta",
            "/login",
            "/register",
            "/password",
            "/search"
        ],
        "initial_actions": [
            { "type": "waitForLoadState", "state": "domcontentloaded" },
            { "type": "waitForLoadState", "state": "networkidle" }
        ],
        "validate_url": ".product-list__item",
        "validation_timeout": 30000,
        "continue_on_validation_error": true
    },
    "crawler_params": {
        "headless": true,
        "defaultViewport": { "width": 1280, "height": 800 },
        "timeout": 300000,
        "args": [
            "--user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36",
            "--disable-dev-shm-usage",
            "--no-sandbox",
            "--disable-setuid-sandbox",
            "--disable-gpu",
            "--disable-software-rasterizer",
            "--disable-extensions",
            "--max-old-space-size=4096",
            "--ignore-certificate-errors",
            "--disable-web-security",
            "--disable-features=IsolateOrigins,site-per-process"
        ]
    },
    "pre_actions": [
        { "type": "waitForLoadState", "state": "domcontentloaded", "timeout": 30000 },
        { "type": "waitForLoadState", "state": "networkidle", "timeout": 30000 },
        { "type": "waitForSelector", "selector": ".product-list__item", "timeout": 30000 }
    ],
    "extraction_config": {
        "type": "json_css",
        "params": {
            "schema": {
                "name": "FancyYou - Categorías múltiples",
                "baseSelector": ".product-list__item",
                "fields": [
                    {
                        "name": "title",
                        "selector": "h3 a",
                        "type": "text"
                    },
                    {
                        "name": "sku",
                        "selector": "small.sku",
                        "type": "text"
                    },
                    {
                        "name": "price",
                        "selector": ".product-price span.price:not(.old)",
                        "type": "text",
                        "transform": "return data.replace(/[^\\d,\\.]/g, '').trim().replace(/(\\.00|,00)$/, '');"
                    },
                    {
                        "name": "price_original",
                        "selector": ".product-price span.price.old",
                        "type": "text",
                        "transform": "return data.replace(/[^\\d,\\.]/g, '').trim().replace(/(\\.00|,00)$/, '');"
                    },
                    {
                        "name": "image",
                        "selector": ".aspect-ratio-image-product img",
                        "type": "attribute",
                        "attribute": "src",
                        "transform": "return data.startsWith('/') ? 'https://fancyyou.com.ar' + data : data;"
                    },
                    {
                        "name": "url",
                        "selector": "h3 a",
                        "type": "attribute",
                        "attribute": "href",
                        "transform": "return data.startsWith('/') ? 'https://fancyyou.com.ar' + data : data;"
                    },
                    {
                        "name": "category",
                        "type": "url_extract",
                        "pattern": "https://fancyyou\\.com\\.ar/categoria/([^?#/]+)(?:/[^?#]*)?",
                        "transform": "return decodeURIComponent(data).replace(/-/g, ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');"
                    },
                    {
                        "name": "discount_percentage",
                        "selector": ".sticker.discount span",
                        "type": "text",
                        "transform": "return data.replace(/[^\\d]/g, '');"
                    },
                    {
                        "name": "source_url",
                        "type": "url"
                    },
                    {
                        "name": "scraped_at",
                        "type": "timestamp"
                    },
                    {
                        "name": "site_name",
                        "type": "constant",
                        "value": "FancyYou"
                    }
                ]
            },
            "verbose": true
        }
    },
    "cache_mode": "bypass",
    "semaphore_count": 2,
    "verbose": true
}